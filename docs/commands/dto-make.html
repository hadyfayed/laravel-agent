---
layout: page
title: /laravel-agent:dto:make
description: Create Data Transfer Objects using spatie/laravel-data
nav_active: Commands
back_url: /commands.html
back_text: All Commands
---

<div class="mb-8">
    <div class="flex items-center gap-3 mb-4">
        <span class="badge badge-data">Data</span>
    </div>
    <h1 class="text-3xl font-bold mb-2 font-mono">/laravel-agent:dto:make</h1>
    <p class="text-xl text-muted-foreground">Create type-safe Data Transfer Objects using spatie/laravel-data</p>
</div>

<div class="prose prose-neutral dark:prose-invert max-w-none">
    <h2>Overview</h2>
    <p>The <code>/dto:make</code> command generates type-safe Data Transfer Objects using the <a href="https://github.com/spatie/laravel-data" target="_blank" class="text-primary hover:underline">spatie/laravel-data</a> package. DTOs provide a clean, validated way to transfer data between application layers, combining request validation, API responses, and data transformation in a single, reusable class.</p>

    <p>Key features:</p>
    <ul>
        <li><strong>Type safety</strong> - Full PHP 8.2+ type hints with strict validation</li>
        <li><strong>Attribute-based validation</strong> - Validation rules defined directly on properties</li>
        <li><strong>Automatic casting</strong> - Convert between arrays, models, requests, and DTOs</li>
        <li><strong>Lazy loading</strong> - Include expensive relationships only when needed</li>
        <li><strong>API resources</strong> - Use DTOs as API response transformers</li>
    </ul>

    <h2>Usage</h2>
    <pre class="language-bash"><code class="language-bash">/laravel-agent:dto:make &lt;DTOName&gt; [--from=request|model|array] [--resource]</code></pre>

    <h2>Examples</h2>
    <pre class="language-bash"><code class="language-bash"># Create a basic DTO for user creation
/laravel-agent:dto:make CreateUserData

# Create a DTO from an existing model as an API resource
/laravel-agent:dto:make ProductData --from=model --resource

# Create a DTO that integrates with request validation
/laravel-agent:dto:make OrderData --from=request

# Interactive mode (will prompt for configuration)
/laravel-agent:dto:make</code></pre>

    <h2>What Gets Created</h2>
    <p>The command generates a complete DTO class in the <code>app/Data/</code> directory with:</p>

    <div class="overflow-x-auto not-prose">
        <table class="w-full text-sm">
            <thead>
                <tr class="border-b border-border">
                    <th class="text-left py-3 px-4 font-medium">Component</th>
                    <th class="text-left py-3 px-4 font-medium">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Constructor Properties</td>
                    <td class="py-3 px-4">Type-hinted properties with optional defaults</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Validation Attributes</td>
                    <td class="py-3 px-4">Built-in validation rules as PHP attributes</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Custom Validation</td>
                    <td class="py-3 px-4">Static rules() and messages() methods</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Casting Rules</td>
                    <td class="py-3 px-4">Automatic type casting for dates, enums, nested DTOs</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Transformation Methods</td>
                    <td class="py-3 px-4">fromModel() and custom factory methods</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Generated Code Examples</h2>

    <h3>Basic DTO</h3>
    <p>A simple DTO for user creation with type-safe properties:</p>
    <pre class="language-php"><code class="language-php">&lt;?php

declare(strict_types=1);

namespace App\Data;

use Spatie\LaravelData\Data;

final class CreateUserData extends Data
{
    public function __construct(
        public string $name,
        public string $email,
        public string $password,
        public ?string $phone = null,
    ) {}
}</code></pre>

    <h3>DTO with Validation Attributes</h3>
    <p>Enhanced DTO with built-in validation using PHP attributes:</p>
    <pre class="language-php"><code class="language-php">&lt;?php

declare(strict_types=1);

namespace App\Data;

use Spatie\LaravelData\Data;
use Spatie\LaravelData\Attributes\Validation\Email;
use Spatie\LaravelData\Attributes\Validation\Max;
use Spatie\LaravelData\Attributes\Validation\Min;
use Spatie\LaravelData\Attributes\Validation\Required;
use Spatie\LaravelData\Attributes\Validation\Unique;

final class CreateUserData extends Data
{
    public function __construct(
        #[Required, Max(255)]
        public string $name,

        #[Required, Email, Unique('users', 'email')]
        public string $email,

        #[Required, Min(8)]
        public string $password,

        #[Max(20)]
        public ?string $phone = null,
    ) {}

    public static function rules(): array
    {
        return [
            'password' => ['confirmed'],
        ];
    }

    public static function messages(): array
    {
        return [
            'email.unique' => 'This email is already registered.',
        ];
    }
}</code></pre>

    <h3>DTO from Model (API Resource)</h3>
    <p>Transform Eloquent models into API responses with lazy-loaded relationships:</p>
    <pre class="language-php"><code class="language-php">&lt;?php

declare(strict_types=1);

namespace App\Data;

use App\Models\Product;
use Carbon\Carbon;
use Spatie\LaravelData\Data;
use Spatie\LaravelData\Lazy;
use Spatie\LaravelData\Attributes\MapOutputName;
use Spatie\LaravelData\Attributes\WithCast;
use Spatie\LaravelData\Casts\DateTimeInterfaceCast;

final class ProductData extends Data
{
    public function __construct(
        public int $id,
        public string $name,
        public string $slug,
        public ?string $description,

        #[MapOutputName('price')]
        public int $price_cents,

        public string $formatted_price,

        #[WithCast(DateTimeInterfaceCast::class, format: 'Y-m-d')]
        public Carbon $created_at,

        // Lazy loaded relationships
        public Lazy|CategoryData $category,

        /** @var ProductImageData[] */
        public Lazy|array $images,
    ) {}

    public static function fromModel(Product $product): self
    {
        return new self(
            id: $product->id,
            name: $product->name,
            slug: $product->slug,
            description: $product->description,
            price_cents: $product->price_cents,
            formatted_price: $product->formatted_price,
            created_at: $product->created_at,
            category: Lazy::whenLoaded('category', $product, fn () =>
                CategoryData::from($product->category)
            ),
            images: Lazy::whenLoaded('images', $product, fn () =>
                ProductImageData::collect($product->images)
            ),
        );
    }

    public function withFullIncludes(): self
    {
        return $this->include('category', 'images');
    }
}</code></pre>

    <h3>Nested DTOs</h3>
    <p>Complex data structures with nested DTOs and enums:</p>
    <pre class="language-php"><code class="language-php">&lt;?php

declare(strict_types=1);

namespace App\Data;

use Spatie\LaravelData\Data;
use Spatie\LaravelData\Attributes\DataCollectionOf;

final class OrderData extends Data
{
    public function __construct(
        public int $id,
        public string $number,
        public OrderStatus $status,
        public CustomerData $customer,
        public AddressData $shipping_address,
        public AddressData $billing_address,

        #[DataCollectionOf(OrderItemData::class)]
        public array $items,

        public MoneyData $subtotal,
        public MoneyData $tax,
        public MoneyData $total,
    ) {}
}

final class MoneyData extends Data
{
    public function __construct(
        public int $amount_cents,
        public string $currency,
        public string $formatted,
    ) {}

    public static function fromCents(int $cents, string $currency = 'USD'): self
    {
        return new self(
            amount_cents: $cents,
            currency: $currency,
            formatted: number_format($cents / 100, 2) . ' ' . $currency,
        );
    }
}</code></pre>

    <h3>DTO with Enum</h3>
    <p>Leverage PHP 8.1+ enums for type-safe value objects:</p>
    <pre class="language-php"><code class="language-php">&lt;?php

declare(strict_types=1);

namespace App\Data;

use App\Enums\OrderStatus;
use Spatie\LaravelData\Data;

final class UpdateOrderData extends Data
{
    public function __construct(
        public OrderStatus $status,
        public ?string $notes = null,
        public ?string $tracking_number = null,
    ) {}
}</code></pre>

    <h2>Usage Patterns</h2>

    <h3>In Controllers (Request Validation)</h3>
    <p>Use DTOs directly in controller method signatures for automatic validation:</p>
    <pre class="language-php"><code class="language-php">public function store(CreateUserData $data): JsonResponse
{
    // $data is already validated
    $user = User::create([
        'name' => $data->name,
        'email' => $data->email,
        'password' => Hash::make($data->password),
        'phone' => $data->phone,
    ]);

    return response()->json(UserData::from($user), 201);
}</code></pre>

    <h3>As API Resources</h3>
    <p>Transform Eloquent models and collections into JSON responses:</p>
    <pre class="language-php"><code class="language-php">public function index(): JsonResponse
{
    $products = Product::with(['category', 'images'])->paginate();

    return ProductData::collect($products)->toResponse(request());
}

public function show(Product $product): ProductData
{
    return ProductData::from($product->load(['category', 'images']))
        ->include('category', 'images');
}</code></pre>

    <h3>Manual Creation</h3>
    <p>Create and validate DTOs from arrays or requests:</p>
    <pre class="language-php"><code class="language-php">// From array
$data = CreateUserData::from([
    'name' => 'John Doe',
    'email' => 'john@example.com',
    'password' => 'secret123',
]);

// From request
$data = CreateUserData::from($request);

// Validate and create
$data = CreateUserData::validateAndCreate($request->all());</code></pre>

    <h2>Options</h2>
    <p>Customize DTO generation with these flags:</p>
    <ul>
        <li><strong>--from=request</strong> - Generate DTO optimized for request validation</li>
        <li><strong>--from=model</strong> - Generate DTO with fromModel() method for API resources</li>
        <li><strong>--from=array</strong> - Basic DTO for internal data transfer</li>
        <li><strong>--resource</strong> - Add API resource transformation methods</li>
    </ul>

    <h2>Interactive Prompts</h2>
    <p>When run without arguments, the command guides you through configuration:</p>
    <ol>
        <li><strong>DTO name</strong> - Name of the DTO class (e.g., CreateUserData)</li>
        <li><strong>DTO purpose</strong>
            <ul>
                <li>Request validation (form input)</li>
                <li>API response (resource)</li>
                <li>Internal data transfer</li>
                <li>All of the above</li>
            </ul>
        </li>
        <li><strong>Properties</strong> - Interactive builder for each property:
            <ul>
                <li>Name (text input)</li>
                <li>Type (string, int, float, bool, array, Carbon, Enum, DTO)</li>
                <li>Nullable (yes/no)</li>
                <li>Validation (required, email, max, min, unique, etc.)</li>
            </ul>
        </li>
        <li><strong>Include validation rules</strong> - Add validation attributes</li>
        <li><strong>From existing model</strong> - Generate from model structure</li>
    </ol>

    <h2>Best Practices</h2>
    <ol>
        <li><strong>Naming convention</strong> - Suffix DTOs with "Data" (CreateUserData, ProductData)</li>
        <li><strong>Single responsibility</strong> - Create separate DTOs for different operations (Create vs Update)</li>
        <li><strong>Type everything</strong> - Use strict types and declare(strict_types=1)</li>
        <li><strong>Immutability</strong> - Mark DTO classes as final and use readonly where possible</li>
        <li><strong>Validation</strong> - Use attributes for simple rules, static methods for complex validation</li>
        <li><strong>Lazy loading</strong> - Use Lazy for expensive relationships in API resources</li>
        <li><strong>Documentation</strong> - Add PHPDoc for array collections and complex types</li>
        <li><strong>Testing</strong> - Test DTO validation, casting, and transformation logic</li>
    </ol>

    <h2>Common Validation Attributes</h2>
    <div class="overflow-x-auto not-prose">
        <table class="w-full text-sm">
            <thead>
                <tr class="border-b border-border">
                    <th class="text-left py-3 px-4 font-medium">Attribute</th>
                    <th class="text-left py-3 px-4 font-medium">Example</th>
                    <th class="text-left py-3 px-4 font-medium">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Required</td>
                    <td class="py-3 px-4"><code>#[Required]</code></td>
                    <td class="py-3 px-4">Field must be present</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Email</td>
                    <td class="py-3 px-4"><code>#[Email]</code></td>
                    <td class="py-3 px-4">Must be valid email format</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Min</td>
                    <td class="py-3 px-4"><code>#[Min(8)]</code></td>
                    <td class="py-3 px-4">Minimum length or value</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Max</td>
                    <td class="py-3 px-4"><code>#[Max(255)]</code></td>
                    <td class="py-3 px-4">Maximum length or value</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Unique</td>
                    <td class="py-3 px-4"><code>#[Unique('users', 'email')]</code></td>
                    <td class="py-3 px-4">Must be unique in database</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Between</td>
                    <td class="py-3 px-4"><code>#[Between(1, 100)]</code></td>
                    <td class="py-3 px-4">Value must be within range</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">In</td>
                    <td class="py-3 px-4"><code>#[In(['draft', 'published'])]</code></td>
                    <td class="py-3 px-4">Must be one of specified values</td>
                </tr>
                <tr class="border-b border-border">
                    <td class="py-3 px-4">Url</td>
                    <td class="py-3 px-4"><code>#[Url]</code></td>
                    <td class="py-3 px-4">Must be valid URL</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Package Installation</h2>
    <p>The command automatically installs spatie/laravel-data if not present:</p>
    <pre class="language-bash"><code class="language-bash">composer require spatie/laravel-data</code></pre>

    <h2>See Also</h2>
    <ul>
        <li><a href="{{ '/commands/api-make.html' | relative_url }}" class="text-primary hover:underline">/laravel-agent:api:make</a> - Create versioned API resources</li>
        <li><a href="{{ '/commands/validation-make.html' | relative_url }}" class="text-primary hover:underline">/laravel-agent:validation:make</a> - Generate form request validation</li>
        <li><a href="{{ '/commands/resource-make.html' | relative_url }}" class="text-primary hover:underline">/laravel-agent:resource:make</a> - Create API resources</li>
        <li><a href="https://spatie.be/docs/laravel-data" target="_blank" class="text-primary hover:underline">Spatie Laravel Data Documentation</a> - Official package docs</li>
    </ul>
</div>
